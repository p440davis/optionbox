!function(){"use strict";var a={storageExists:"undefined"!=typeof Storage,key:function(e){return"optionbox-"+e},store:function(e,t){this.storageExists&&sessionStorage.setItem(this.key(e),t)},remove:function(e){this.storageExists&&sessionStorage.removeItem(this.key(e))},get:function(e){if(this.storageExists)return sessionStorage.getItem(this.key(e))}},c={listen:function(e){var t=this;[].forEach.call(e,function(e){e.onclick=function(){t.change(e)}})},change:function(e){var t=e.dataset.optionboxName,o=e.dataset.optionboxValue,n=e.closest(".optionbox-item"),c=e.closest(".optionbox"),i=c.querySelectorAll(".optionbox-radio:not(:checked)"),s=document.querySelector("[name="+t+"]");s.value!=o?(s.value=o,e.checked=!0,a.store(s.name,s.value),this.close(n,c,i)):(s.selectedIndex=-1,e.checked=!1,a.remove(s.name),this.open(n,c))},close:function(e,t,o){e.classList.add("selected"),t.classList.add("closed"),[].forEach.call(o,function(e){return e.closest("label").classList.remove("selected")})},open:function(e,t){e.classList.remove("selected"),t.classList.remove("closed")}},t={init:function(e){var t=e?e.selector:void 0,o=t?document.querySelectorAll(t):document.querySelectorAll("select"),n=[];o.length&&([].forEach.call(o,function(e){"SELECT"==e.tagName?n.push(e):console.warn("Optionbox warning: Your selection includes a <"+e.tagName.toLowerCase()+">. Only <select> elements can be converted to an optionbox")}),this.create(n),c.listen(document.querySelectorAll(".optionbox-radio")),this.clickAllSelected())},create:function(e){var n=this;e.forEach(function(e){var t=document.createElement("span"),o=a.get(e.name);t.classList.add("optionbox"),t.innerHTML=n.replicate(e.querySelectorAll("option"),e.name,o),e.insertAdjacentElement("beforebegin",t),e.selectedIndex=-1,e.hidden=!0})},replicate:function(e,o,n){var c="";return[].forEach.call(e,function(e){var t=!1;n===e.value?t=!0:!n&&e.hasAttribute("selected")&&(t=!0),c+='\n                <label class="optionbox-item">\n                <input\n                    type="radio"\n                    class="optionbox-radio"\n                    name="'+o+'-options"\n                    data-optionbox-name="'+o+'"\n                    data-optionbox-value="'+e.value+'"\n                    checked="'+t+'">\n                '+e.innerHTML+"\n                </label>"}),c},clickAllSelected:function(){var e=document.querySelectorAll(".optionbox-radio[checked=true]");[].forEach.call(e,function(e){e.click()})}};window.optionbox=function(e){return t.init(e)}}();
//# sourceMappingURL=optionbox.0.1.0.min.js.map
