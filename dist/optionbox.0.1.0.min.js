!function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={defaultConfig:{persist:window.location.pathname,prefix:"_optionbox",select:"select"},config:function(e){var t=Object.assign(this.defaultConfig,e);return this.storageExists()||(t.persist=!1),t},storageExists:function(){return void 0!==("undefined"==typeof Storage?"undefined":e(Storage))},selectElements:function(e){var t=document.querySelectorAll(e),n=[];return t.length&&[].forEach.call(t,function(e){"SELECT"===e.tagName?n.push(e):console.warn("Optionbox warning: Your selection includes a <"+e.tagName.toLowerCase()+">. Only <select> elements can be converted to an optionbox")}),n}},i={optionboxes:function(r,e){var a=this,u=[];return e.forEach(function(e){var t=r.prefix,n=e.name,o=e.getAttribute("class"),s=e.getAttribute("style"),i="",l=e.querySelectorAll("option"),c=document.createElement("span");r.persist&&(i=sessionStorage[r.persist+">"+e.name]),c.id=n+t,null!=o&&c.setAttribute("class",o),c.classList.add(t),null!=s&&c.setAttribute("style",s),c.innerHTML=a.options(l,n,i,t),e.insertAdjacentElement("beforebegin",c),e.selectedIndex=-1,e.hidden=!0,u.push(c)}),u},options:function(e,i,l,c){var r=this,a="";return[].forEach.call(e,function(e){var t=r.preselected(l,e),n=e.getAttribute("alt"),o=e.getAttribute("class"),s=e.getAttribute("style");a+='\n                    <label \n                        class="'+c+"-item "+(null!=o?o:"")+'"\n                        style="'+(null!=s?s:"")+'">\n                    <input\n                        type="radio"\n                        class="'+c+'-radio"\n                        name="'+(i+c)+'"\n                        value="'+e.value+'"\n                        checked="'+t+'">\n                        '+e.innerHTML,n&&(a+='<small class="'+c+'-alt">'+n+"</small>"),a+="</label>"}),a},preselected:function(e,t){return e===t.value||!(e||!t.hasAttribute("selected"))}},l={listen:function(t,e){var n=this;e.forEach(function(e){e.addEventListener("click",function(e){e.target&&"INPUT"===e.target.tagName&&n.change(e.target,t)})})},change:function(e,t){var n=t.prefix,o=e.closest("."+n),s=o.id.replace(n,""),i=e.value,l=e.closest("."+n+"-item"),c=o.querySelectorAll("._optionbox-radio:not(:checked)"),r=document.querySelector('[name="'+s+'"]'),a=t.persist+">"+r.name;r.value!=i?(r.value=i,e.checked=!0,this.store(t,r,a),this.close(l,o,c)):(r.selectedIndex=-1,e.checked=!1,this.remove(t,a),this.open(l,o))},close:function(e,t,n){e.classList.add("selected"),t.classList.add("closed"),[].forEach.call(n,function(e){return e.closest("label").classList.remove("selected")})},open:function(e,t){e.classList.remove("selected"),t.classList.remove("closed")},init:function(e){e.forEach(function(e){var t=e.querySelectorAll("[checked=true]");[].forEach.call(t,function(e){e.click()})})},store:function(e,t,n){e.persist&&(sessionStorage[n]=t.value)},remove:function(e,t){e.persist&&delete sessionStorage[t]}};window.optionbox=function(e){var t=s.config(e),n=s.selectElements(t.select),o=i.optionboxes(t,n);l.listen(t,o),l.init(o)}}();
//# sourceMappingURL=optionbox.0.1.0.min.js.map
