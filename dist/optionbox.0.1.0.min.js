!function(){"use strict";var a={storageExists:"undefined"!=typeof Storage,key:function(e){return"optionbox-"+e},store:function(e,t){this.storageExists&&sessionStorage.setItem(this.key(e),t)},remove:function(e){this.storageExists&&sessionStorage.removeItem(this.key(e))},get:function(e){if(this.storageExists)return sessionStorage.getItem(this.key(e))}},n={listen:function(e,t){var o=this;[].forEach.call(e,function(e){e.onclick=function(){o.change(e,t)}})},change:function(e,t){var o=e.dataset.optionboxName,n=e.dataset.optionboxValue,c=e.closest(".optionbox-item"),s=e.closest(".optionbox"),i=s.querySelectorAll(".optionbox-radio:not(:checked)"),l=document.querySelector("[name="+o+"]");l.value!=n?(l.value=n,e.checked=!0,t&&a.store(l.name,l.value),this.close(c,s,i)):(l.selectedIndex=-1,e.checked=!1,a.remove(l.name),this.open(c,s))},close:function(e,t,o){e.classList.add("selected"),t.classList.add("closed"),[].forEach.call(o,function(e){return e.closest("label").classList.remove("selected")})},open:function(e,t){e.classList.remove("selected"),t.classList.remove("closed")}},s={init:function(e){var t=e.select?document.querySelectorAll(e.select):document.querySelectorAll("select"),o=[];t.length&&([].forEach.call(t,function(e){"SELECT"==e.tagName?o.push(e):console.warn("Optionbox warning: Your selection includes a <"+e.tagName.toLowerCase()+">. Only <select> elements can be converted to an optionbox")}),this.create(o),n.listen(document.querySelectorAll(".optionbox-radio"),e.persist),this.clickAllSelected())},create:function(e){var n=this;e.forEach(function(e){var t=document.createElement("span"),o=a.get(e.name);t.classList.add("optionbox"),t.innerHTML=n.replicate(e.querySelectorAll("option"),e.name,o),e.insertAdjacentElement("beforebegin",t),e.selectedIndex=-1,e.hidden=!0})},replicate:function(e,o,n){var c="";return[].forEach.call(e,function(e){var t=!1;n===e.value?t=!0:!n&&e.hasAttribute("selected")&&(t=!0),c+='\n                <label class="optionbox-item">\n                <input\n                    type="radio"\n                    class="optionbox-radio"\n                    name="'+o+'-options"\n                    data-optionbox-name="'+o+'"\n                    data-optionbox-value="'+e.value+'"\n                    checked="'+t+'">\n                '+e.innerHTML+"\n                </label>"}),c},clickAllSelected:function(){var e=document.querySelectorAll(".optionbox-radio[checked=true]");[].forEach.call(e,function(e){e.click()})}};window.optionbox=function(e){var t,o,n,c=(o="select",n=!0,(t=e)&&(void 0!==t.select&&(o=t.select),void 0!==t.persist&&(n=t.persist)),{select:o,persist:n});s.init(c)}}();
//# sourceMappingURL=optionbox.0.1.0.min.js.map
