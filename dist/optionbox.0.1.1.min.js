!function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={defaultConfig:{persist:window.location.pathname,prefix:"optionbox-",select:"select:not([multiple])"},config:function(e){var t=Object.assign(this.defaultConfig,e);return this.storageExists()||(t.persist=!1),t},storageExists:function(){return void 0!==("undefined"==typeof Storage?"undefined":e(Storage))},selectElements:function(e){var t=document.querySelectorAll(e),n=[];return t.length&&[].forEach.call(t,function(e){"SELECT"===e.tagName?n.push(e):console.warn("Optionbox warning: Your selection includes a <"+e.tagName.toLowerCase()+">. Only <select> elements can be converted to an optionbox")}),n}},l={optionboxes:function(u,e){var f=this,p=[];return e.forEach(function(e){var t=u.prefix,n=e.name,o=e.getAttribute("class"),s=e.getAttribute("style"),l="",i=e.querySelectorAll("optgroup"),r=e.querySelectorAll("option"),c=document.createElement("span"),a="<div class="+t+"container>";u.persist&&(l=sessionStorage[u.persist+">"+e.name]),c.id=t+n,null!=o&&c.setAttribute("class",o),c.classList.add(t),null!=s&&c.setAttribute("style",s),i.length?a+=f.optgroups(i,n,l,t):a+=f.options(r,n,l,t),a+="</div>",c.innerHTML=a,e.insertAdjacentElement("beforebegin",c),e.selectedIndex=-1,e.remove(),p.push(c)}),p},optgroups:function(e,l,i,r){var c=this,a="";return[].forEach.call(e,function(e){var t=e.getAttribute("label"),n=e.getAttribute("class"),o=e.getAttribute("style"),s=e.querySelectorAll("option");a+='<div \n                class="'+r+"group "+(null!=n?n:"")+'"\n                style="'+(null!=o?o:"")+'">',t&&(a+='<small class="'+r+'group-label">'+t+"</small>"),a+=c.options(s,l,i,r),a+="</div>"}),a},options:function(e,r,c,a){var u=this,f="";return[].forEach.call(e,function(e){var t=e.value,n=e.innerHTML,o=e.getAttribute("alt"),s=e.getAttribute("class"),l=e.getAttribute("style"),i=u.preselected(c,e);f+='\n                    <label \n                        class="'+a+"item "+(null!=s?s:"")+'"\n                        style="'+(null!=l?l:"")+'">\n                    <input\n                        type="radio"\n                        class="'+a+'radio"\n                        name="'+r+'"\n                        value="'+t+'"\n                        checked="'+i+'">\n                        '+n,o&&(f+='<small class="'+a+'alt">'+o+"</small>"),f+="</label>"}),f},preselected:function(e,t){return e===t.value||!(e||!t.hasAttribute("selected"))}},i={listen:function(t,e){var n=this;e.forEach(function(e){e.addEventListener("click",function(e){e.target&&"INPUT"===e.target.tagName&&n.change(e.target,t)})})},change:function(e,t){var n=t.prefix,o=e.name,s=t.persist+">"+o,l=e.value,i=e.closest("label"),r=e.closest("."+n);i.classList.contains("selected")?(e.checked=!1,this.remove(t,s),this.open(i,r)):(e.checked=!0,this.store(t,s,l),this.close(i,r))},close:function(e,t){var n=t.querySelectorAll("._optionbox-radio:not(:checked)");e.classList.add("selected"),t.classList.add("closed"),[].forEach.call(n,function(e){return e.closest("label").classList.remove("selected")})},open:function(e,t){e.classList.remove("selected"),t.classList.remove("closed")},init:function(e){e.forEach(function(e){var t=e.querySelectorAll("[checked=true]");[].forEach.call(t,function(e){e.click()})})},store:function(e,t,n){e.persist&&(sessionStorage[t]=n)},remove:function(e,t){e.persist&&delete sessionStorage[t]}};window.optionbox=function(e){var t=s.config(e),n=s.selectElements(t.select),o=l.optionboxes(t,n);i.listen(t,o),i.init(o)}}();
//# sourceMappingURL=optionbox.0.1.1.min.js.map
