!function(){"use strict";var l={defaultConfig:{persist:window.location.pathname,prefix:"optionbox-",select:"select:not([multiple])"},config:function(e){var t=Object.assign(this.defaultConfig,e);return this.storageExists()||(t.persist=!1),t},storageExists:function(){return!0},selectElements:function(e){var t=document.querySelectorAll(e),n=[];return t.length&&[].forEach.call(t,function(e){"SELECT"===e.tagName?n.push(e):console.warn("Optionbox warning: Your selection includes a <"+e.tagName.toLowerCase()+">. Only <select> elements can be converted to an optionbox")}),n}},o={optionboxes:function(u,e){var f=this,d=[];return e.forEach(function(e){var t=u.prefix,n=e.name,s=e.getAttribute("class"),l=e.getAttribute("style"),o="",i=e.querySelectorAll("optgroup"),c=e.querySelectorAll("option"),r=document.createElement("span"),a="<div class="+t+"container>";u.persist&&(o=sessionStorage[u.persist+">"+e.name]),r.id=t+n,null!=s&&r.setAttribute("class",s),r.classList.add(t),null!=l&&r.setAttribute("style",l),i.length?a+=f.optgroups(i,n,o,t):a+=f.options(c,n,o,t),a+="</div>",r.innerHTML=a,e.insertAdjacentElement("beforebegin",r),e.selectedIndex=-1,e.remove(),d.push(r)}),d},optgroups:function(e,o,i,c){var r=this,a="";return[].forEach.call(e,function(e){var t=e.getAttribute("label"),n=e.getAttribute("class"),s=e.getAttribute("style"),l=e.querySelectorAll("option");a+='<div \n                class="'+c+"group "+(null!=n?n:"")+'"\n                style="'+(null!=s?s:"")+'">',t&&(a+='<small class="'+c+'group-label">'+t+"</small>"),a+=r.options(l,o,i,c),a+="</div>"}),a},options:function(e,c,r,a){var u=this,f="";return[].forEach.call(e,function(e){var t=e.value,n=e.innerHTML,s=e.getAttribute("alt"),l=e.getAttribute("class"),o=e.getAttribute("style"),i=u.preselected(r,e);f+='\n                    <label \n                        class="'+a+"item "+(null!=l?l:"")+'"\n                        style="'+(null!=o?o:"")+'">\n                    <input\n                        type="radio"\n                        class="'+a+'radio"\n                        name="'+c+'"\n                        value="'+t+'"\n                        checked="'+i+'">\n                        '+n,s&&(f+='<small class="'+a+'alt">'+s+"</small>"),f+="</label>"}),f},preselected:function(e,t){return e===t.value||!(e||!t.hasAttribute("selected"))}},i={listen:function(t,e){var n=this;e.forEach(function(e){e.addEventListener("click",function(e){e.target&&"INPUT"===e.target.tagName&&n.change(e.target,t)})})},change:function(e,t){var n=t.prefix,s=e.name,l=t.persist+">"+s,o=e.value,i=e.closest("label"),c=e.closest("."+n);i.classList.contains("selected")?(e.checked=!1,this.remove(t,l),this.open(i,c)):(e.checked=!0,this.store(t,l,o),this.close(i,c))},close:function(e,t){var n=t.querySelectorAll("._optionbox-radio:not(:checked)");e.classList.add("selected"),t.classList.add("closed"),[].forEach.call(n,function(e){return e.closest("label").classList.remove("selected")})},open:function(e,t){e.classList.remove("selected"),t.classList.remove("closed")},init:function(e){e.forEach(function(e){var t=e.querySelectorAll("[checked=true]");[].forEach.call(t,function(e){e.click()})})},store:function(e,t,n){e.persist&&(sessionStorage[t]=n)},remove:function(e,t){e.persist&&delete sessionStorage[t]}};window.optionbox=function(e){var t=l.config(e),n=l.selectElements(t.select),s=o.optionboxes(t,n);i.listen(t,s),i.init(s)}}();
//# sourceMappingURL=dist/optionbox.map.js