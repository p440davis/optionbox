(function () {
  'use strict';

  var core = {
    init: function init(selector) {
      var elements = selector ? document.querySelectorAll(selector) : document.querySelectorAll("select");
      var selects = [];
      if (elements.length) {
        [].forEach.call(elements, function (element) {
          if (element.tagName == "SELECT") {
            selects.push(element);
          } else console.warn("Optionbox warning: Your selection includes a <" + element.tagName.toLowerCase() + ">. Only <select> elements can be converted to an optionbox");
        });
        this.create(selects);
        this.listen(document.querySelectorAll(".optionbox-button"));
      }
    },
    create: function create(selects) {
      var _this = this;

      selects.forEach(function (select) {
        var optionsBox = document.createElement("span");

        optionsBox.classList.add("optionbox");
        optionsBox.innerHTML = _this.replicate(select.querySelectorAll("option"), select.name);

        select.insertAdjacentElement("beforebegin", optionsBox);

        select.selectedIndex = -1;
        select.hidden = true;
      });
    },
    replicate: function replicate(options, name) {
      var content = "";

      [].forEach.call(options, function (option) {
        content += "<label class=\"optionbox-label\">\n                <input type=\"radio\" name=\"" + name + "-options\" class=\"optionbox-button\" \n                    data-optionbox-name=\"" + name + "\"\n                    data-optionbox-value=\"" + option.value + "\">\n                    \n                " + option.innerHTML + "\n                </label>";
      });

      return content;
    },
    listen: function listen(elements) {
      var _this2 = this;

      [].forEach.call(elements, function (optionButton) {
        optionButton.onclick = function () {
          var name = optionButton.dataset.optionboxName;
          var value = optionButton.dataset.optionboxValue;
          _this2.select(optionButton, name, value);
        };
      });
    },
    select: function select(optionButton, name, value) {
      var select = document.querySelector("[name=" + name + "]");
      var optionLabel = optionButton.closest(".optionbox-label");
      var optionsBox = optionButton.closest(".optionbox");
      var optionSiblings = optionsBox.querySelectorAll(".optionbox-button:not(:checked)");

      if (select.value != value) {
        // select if not previously selected
        select.value = value;
        optionLabel.classList.add("selected");
        optionsBox.classList.add("selected");
        [].forEach.call(optionSiblings, function (sibling) {
          return sibling.closest("label").classList.remove("selected");
        });
      } else {
        // deselect if previously selected
        select.selectedIndex = -1;
        optionButton.checked = false;
        optionLabel.classList.remove("selected");
        optionsBox.classList.remove("selected");
      }
    }
  };

  core.init();

}());
//# sourceMappingURL=optionbox.min.js.map
