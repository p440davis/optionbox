{"version":3,"file":"optionbox.min.js","sources":["../src/modules/core.js","../src/main.js"],"sourcesContent":["const core = {\n  init(selector) {\n    let elements = selector\n      ? document.querySelectorAll(selector)\n      : document.querySelectorAll(\"select\");\n    let selects = [];\n    if (elements.length) {\n      [].forEach.call(elements, element => {\n        if (element.tagName == \"SELECT\") {\n          selects.push(element);\n        } else\n          console.warn(\n            \"Optionbox warning: Your selection includes a <\" +\n              element.tagName.toLowerCase() +\n              \">. Only <select> elements can be converted to an optionbox\"\n          );\n      });\n      this.create(selects);\n      this.listen(document.querySelectorAll(\".optionbox-radio\"));\n    }\n  },\n\n  create(selects) {\n    selects.forEach(select => {\n      let optionsBox = document.createElement(\"span\");\n\n      optionsBox.classList.add(\"optionbox\");\n      optionsBox.innerHTML = this.replicate(\n        select.querySelectorAll(\"option\"),\n        select.name\n      );\n\n      select.insertAdjacentElement(\"beforebegin\", optionsBox);\n\n      select.selectedIndex = -1;\n      select.hidden = true;\n    });\n  },\n\n  replicate(options, name) {\n    let content = ``;\n\n    [].forEach.call(options, option => {\n      content += `\n        <label class=\"optionbox-item\">\n          <input\n            type=\"radio\"\n            class=\"optionbox-radio\"\n            name=\"${name}-options\"\n            data-optionbox-name=\"${name}\"\n            data-optionbox-value=\"${option.value}\">\n          ${option.innerHTML}\n        </label>`;\n    });\n\n    return content;\n  },\n\n  listen(radios) {\n    [].forEach.call(radios, radio => {\n      radio.onclick = () => {\n        let name = radio.dataset.optionboxName;\n        let value = radio.dataset.optionboxValue;\n        this.select(radio, name, value);\n      };\n    });\n  },\n\n  select(radio, name, value) {\n    let select = document.querySelector(`[name=${name}]`);\n    let optionItem = radio.closest(\".optionbox-item\");\n    let optionsBox = radio.closest(\".optionbox\");\n    let optionSiblings = optionsBox.querySelectorAll(\n      \".optionbox-radio:not(:checked)\"\n    );\n\n    if (select.value != value) {\n      // select if not previously selected\n      select.value = value;\n      optionItem.classList.add(\"selected\");\n      optionsBox.classList.add(\"closed\");\n      [].forEach.call(optionSiblings, sibling =>\n        sibling.closest(\"label\").classList.remove(\"selected\")\n      );\n    } else {\n      // deselect if previously selected\n      select.selectedIndex = -1;\n      radio.checked = false;\n      optionItem.classList.remove(\"selected\");\n      optionsBox.classList.remove(\"closed\");\n    }\n  }\n};\n\nexport { core };\n","import { core } from \"./modules/core\";\n\ncore.init();\n"],"names":["core","init","selector","elements","document","querySelectorAll","selects","length","forEach","call","element","tagName","push","console","warn","toLowerCase","create","listen","optionsBox","createElement","classList","add","innerHTML","replicate","select","name","insertAdjacentElement","selectedIndex","hidden","options","content","option","value","radios","radio","onclick","dataset","optionboxName","optionboxValue","querySelector","optionItem","closest","optionSiblings","sibling","remove","checked"],"mappings":"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"}