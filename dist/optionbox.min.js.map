{"version":3,"file":"optionbox.min.js","sources":["../src/modules/core.js","../src/main.js"],"sourcesContent":["const core = {\n  init(selector) {\n    let elements = selector\n      ? document.querySelectorAll(selector)\n      : document.querySelectorAll(\"select\");\n    let selects = [];\n    if (elements.length) {\n      [].forEach.call(elements, element => {\n        if (element.tagName == \"SELECT\") {\n          selects.push(element);\n        } else\n          console.warn(\n            \"Optionbox warning: Your selection includes a <\" +\n              element.tagName.toLowerCase() +\n              \">. Only <select> elements can be converted to an optionbox\"\n          );\n      });\n      this.create(selects);\n      this.listen(document.querySelectorAll(\".optionbox-button\"));\n    }\n  },\n\n  create(selects) {\n    selects.forEach(select => {\n      let optionsBox = document.createElement(\"span\");\n\n      optionsBox.classList.add(\"optionbox\");\n      optionsBox.innerHTML = this.replicate(\n        select.querySelectorAll(\"option\"),\n        select.name\n      );\n\n      select.insertAdjacentElement(\"beforebegin\", optionsBox);\n\n      select.selectedIndex = -1;\n      select.hidden = true;\n    });\n  },\n\n  replicate(options, name) {\n    let content = ``;\n\n    [].forEach.call(options, option => {\n      content += `<label class=\"optionbox-label\">\n                <input type=\"radio\" name=\"${name}-options\" class=\"optionbox-button\" \n                    data-optionbox-name=\"${name}\"\n                    data-optionbox-value=\"${option.value}\">\n                    \n                ${option.innerHTML}\n                </label>`;\n    });\n\n    return content;\n  },\n\n  listen(elements) {\n    [].forEach.call(elements, optionButton => {\n      optionButton.onclick = () => {\n        let name = optionButton.dataset.optionboxName;\n        let value = optionButton.dataset.optionboxValue;\n        this.select(optionButton, name, value);\n      };\n    });\n  },\n\n  select(optionButton, name, value) {\n    let select = document.querySelector(`[name=${name}]`);\n    let optionLabel = optionButton.closest(\".optionbox-label\");\n    let optionsBox = optionButton.closest(\".optionbox\");\n    let optionSiblings = optionsBox.querySelectorAll(\n      \".optionbox-button:not(:checked)\"\n    );\n\n    if (select.value != value) {\n      // select if not previously selected\n      select.value = value;\n      optionLabel.classList.add(\"selected\");\n      optionsBox.classList.add(\"selected\");\n      [].forEach.call(optionSiblings, sibling =>\n        sibling.closest(\"label\").classList.remove(\"selected\")\n      );\n    } else {\n      // deselect if previously selected\n      select.selectedIndex = -1;\n      optionButton.checked = false;\n      optionLabel.classList.remove(\"selected\");\n      optionsBox.classList.remove(\"selected\");\n    }\n  }\n};\n\nexport { core };\n","import { core } from \"./modules/core\";\n\ncore.init();\n"],"names":["core","init","selector","elements","document","querySelectorAll","selects","length","forEach","call","element","tagName","push","console","warn","toLowerCase","create","listen","optionsBox","createElement","classList","add","innerHTML","replicate","select","name","insertAdjacentElement","selectedIndex","hidden","options","content","option","value","optionButton","onclick","dataset","optionboxName","optionboxValue","querySelector","optionLabel","closest","optionSiblings","sibling","remove","checked"],"mappings":"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"}