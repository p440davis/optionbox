{"version":3,"file":"optionbox.min.js","sources":["../src/modules/core.js","../src/main.js"],"sourcesContent":["const core = {\n  init(selector) {\n    let elements = selector\n      ? document.querySelectorAll(selector)\n      : document.querySelectorAll(\"select\");\n    let selects = [];\n    if (elements.length) {\n      [].forEach.call(elements, element => {\n        if (element.tagName == \"SELECT\") {\n          selects.push(element);\n        } else\n          console.warn(\n            \"Optionbox warning: Your selection includes a <\" +\n              element.tagName.toLowerCase() +\n              \">. Only <select> elements can be converted to an optionbox\"\n          );\n      });\n      this.create(selects);\n      this.listen(document.querySelectorAll(\".optionbox-radio\"));\n    }\n  },\n\n  create(selects) {\n    selects.forEach(select => {\n      let optionsBox = document.createElement(\"span\");\n\n      optionsBox.classList.add(\"optionbox\");\n      optionsBox.innerHTML = this.replicate(\n        select.querySelectorAll(\"option\"),\n        select.name\n      );\n\n      select.insertAdjacentElement(\"beforebegin\", optionsBox);\n\n      select.selectedIndex = -1;\n      select.hidden = true;\n    });\n  },\n\n  replicate(options, name) {\n    let content = \"\";\n\n    [].forEach.call(options, option => {\n      content += `\n        <label class=\"optionbox-item\">\n          <input\n            type=\"radio\"\n            class=\"optionbox-radio\"\n            name=\"${name}-options\"\n            data-optionbox-name=\"${name}\"\n            data-optionbox-value=\"${option.value}\">\n          ${option.innerHTML}\n        </label>`;\n    });\n\n    return content;\n  },\n\n  listen(radios) {\n    [].forEach.call(radios, radio => {\n      radio.onclick = () => {\n        let name = radio.dataset.optionboxName;\n        let value = radio.dataset.optionboxValue;\n        this.select(radio, name, value);\n      };\n    });\n  },\n\n  select(radio, name, value) {\n    let select = document.querySelector(`[name=${name}]`);\n    let optionItem = radio.closest(\".optionbox-item\");\n    let optionsBox = radio.closest(\".optionbox\");\n    let optionSiblings = optionsBox.querySelectorAll(\n      \".optionbox-radio:not(:checked)\"\n    );\n\n    if (select.value != value) {\n      // select if not previously selected\n      select.value = value;\n      optionItem.classList.add(\"selected\");\n      optionsBox.classList.add(\"closed\");\n      [].forEach.call(optionSiblings, sibling =>\n        sibling.closest(\"label\").classList.remove(\"selected\")\n      );\n    } else {\n      // deselect if previously selected\n      select.selectedIndex = -1;\n      radio.checked = false;\n      optionItem.classList.remove(\"selected\");\n      optionsBox.classList.remove(\"closed\");\n    }\n  }\n};\n\nexport { core };\n","import { core } from \"./modules/core\";\n\ncore.init();\n"],"names":["selector","elements","document","querySelectorAll","selects","length","forEach","call","element","tagName","push","console","warn","toLowerCase","create","listen","optionsBox","createElement","classList","add","innerHTML","_this","replicate","select","name","insertAdjacentElement","selectedIndex","hidden","options","content","option","value","radios","onclick","radio","dataset","optionboxName","optionboxValue","querySelector","optionItem","closest","optionSiblings","sibling","remove","checked","init"],"mappings":"0BAAa,eACNA,OACCC,EAAWD,EACXE,SAASC,iBAAiBH,GAC1BE,SAASC,iBAAiB,UAC1BC,EAAU,GACVH,EAASI,YACRC,QAAQC,KAAKN,EAAU,YACD,UAAnBO,EAAQC,UACFC,KAAKF,GAEbG,QAAQC,KACN,iDACEJ,EAAQC,QAAQI,cAChB,qEAGHC,OAAOV,QACPW,OAAOb,SAASC,iBAAiB,uCAInCC,gBACGE,QAAQ,gBACVU,EAAad,SAASe,cAAc,UAE7BC,UAAUC,IAAI,eACdC,UAAYC,EAAKC,UAC1BC,EAAOpB,iBAAiB,UACxBoB,EAAOC,QAGFC,sBAAsB,cAAeT,KAErCU,eAAiB,IACjBC,QAAS,wBAIVC,EAASJ,OACbK,EAAU,YAEXvB,QAAQC,KAAKqB,EAAS,+JAMTJ,iDACeA,0CACCM,EAAOC,uBAC/BD,EAAOV,iCAIRS,mBAGFG,iBACF1B,QAAQC,KAAKyB,EAAQ,cAChBC,QAAU,eACVT,EAAOU,EAAMC,QAAQC,cACrBL,EAAQG,EAAMC,QAAQE,iBACrBd,OAAOW,EAAOV,EAAMO,uBAKxBG,EAAOV,EAAMO,OACdR,EAASrB,SAASoC,uBAAuBd,OACzCe,EAAaL,EAAMM,QAAQ,mBAC3BxB,EAAakB,EAAMM,QAAQ,cAC3BC,EAAiBzB,EAAWb,iBAC9B,kCAGEoB,EAAOQ,OAASA,KAEXA,MAAQA,IACJb,UAAUC,IAAI,cACdD,UAAUC,IAAI,aACtBb,QAAQC,KAAKkC,EAAgB,mBAC9BC,EAAQF,QAAQ,SAAStB,UAAUyB,OAAO,kBAIrCjB,eAAiB,IAClBkB,SAAU,IACL1B,UAAUyB,OAAO,cACjBzB,UAAUyB,OAAO,cCvF7BE"}